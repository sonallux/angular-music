<div class="flex flex-col gap-6">
  <app-hero-header [heroData]="artistHeroData$ | async">
    <p class="mt-auto" *ngIf="(artist$ | async) as artist">
      {{artist.followers.total | number}} Followers -
      {{artist.genres.join(', ')}}
    </p>
  </app-hero-header>

  <div class="space-y-2">
    <h2 class="text-4xl font-normal">Popular</h2>

    <table mat-table [dataSource]="(topTracks$ | async) ?? []">
      <ng-container matColumnDef="name">
        <td mat-cell *matCellDef="let element">{{ element.name }}</td>
      </ng-container>

      <ng-container matColumnDef="artist">
        <td mat-cell *matCellDef="let element">
          <app-artist-link [artist]="element.artists"/>
        </td>
      </ng-container>

      <ng-container matColumnDef="album">
        <td mat-cell *matCellDef="let element">
          <app-album-link [album]="element.album"/>
        </td>
      </ng-container>

      <ng-container matColumnDef="duration">
        <!-- TODO format duration -->
        <td mat-cell *matCellDef="let element">{{element.duration_ms / 1000}}s</td>
      </ng-container>

      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <button mat-button (click)="toggleShowAllTopTracks()">
      {{(showAllTopTracks$ | async) ? 'Show less' : 'See more'}}
    </button>

  </div>

  <app-card-list [cardItems]="albums$ | async" oneRow>
    <h2 title>Discography</h2>
  </app-card-list>

  <app-card-list [cardItems]="relatedArtists$ | async" oneRow>
    <h2 title>Fans also like</h2>
  </app-card-list>

</div>
